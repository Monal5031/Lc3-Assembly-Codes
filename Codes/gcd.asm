	.ORIG x3000
	AND R1,R1,x0
	AND R2,R2,x0

	ADD R1,R1,xA	; 1ST NUM
	ADD R2,R2,x6	; 2ND NUM

REPEAT
	ADD R3,R2,x0
	JSR DIVIDE
	ADD R2,R4,x0
	ADD R1,R3,x0
	ADD R3,R2,x0
	BRnp REPEAT

	LEA R0,MSG
	TRAP x22
	ADD R0,R1,x0
	PUTC
	HALT
MSG
	.STRINGZ "GCD IS:"

DIVIDE
	AND R4,R4,x0
	AND R7,R7,x0
	ADD R4,R1,x0
	ADD R7,R2,x0
	JSR TWOSCOMP

LOOP
	ADD R4,R4,R7
	BRp LOOP
	BRz JMPD
	ADD R4,R4,R2

JMPD
	RET

TWOSCOMP
	NOT R7,R7
	ADD R7,R7,x1
	RET
.END